{"id":"mealfinding-cdn-12w","title":"Documentation - Terraform README with setup and troubleshooting","description":"## Requirements\nCreate `terraform/README.md` with:\n- Prerequisites section (fly CLI, terraform, Fastly API key)\n- Initial setup instructions (Tigris bucket, env vars)\n- Terraform workflow (init, plan, apply)\n- DNS configuration guide (CNAME records, TLS validation)\n- Caching strategy documentation (TTL table)\n- Troubleshooting section\n\n## Acceptance Criteria\n- [ ] README lists all prerequisites\n- [ ] README has step-by-step setup instructions\n- [ ] README documents required environment variables\n- [ ] README explains DNS CNAME configuration\n- [ ] README includes caching strategy table\n- [ ] README has troubleshooting for common issues\n\n## Context\nOpenSpec: add-fastly-cdn-terraform, Section 5\nParent Epic: mealfinding-cdn-995","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T18:15:13.060409838-08:00","created_by":"sword","updated_at":"2026-01-04T18:29:50.365591259-08:00","closed_at":"2026-01-04T18:29:50.365591259-08:00","close_reason":"Created comprehensive terraform/README.md with prerequisites, setup instructions, caching strategy, architecture details, and troubleshooting. All acceptance criteria met."}
{"id":"mealfinding-cdn-1aq","title":"Validation - terraform fmt, validate, and plan","description":"## Requirements\n- Run `terraform fmt` to format configuration\n- Run `terraform validate` to check syntax\n- Run `terraform plan` to preview changes (requires credentials)\n\n## Acceptance Criteria\n- [ ] All .tf files pass `terraform fmt` check\n- [ ] `terraform validate` passes with no errors\n- [ ] `terraform plan` succeeds (may require credentials setup)\n\n## Context\nOpenSpec: add-fastly-cdn-terraform, Section 6\nParent Epic: mealfinding-cdn-995\nDepends on: All Terraform and VCL configuration tasks","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T18:15:22.396405138-08:00","created_by":"sword","updated_at":"2026-01-04T19:10:07.145484672-08:00","closed_at":"2026-01-04T19:10:07.145484672-08:00","close_reason":"Completed comprehensive manual validation: verified HCL syntax, brace matching, file structure, variable references, and resource declarations. All .tf files valid. Documented in VALIDATION.md. Terraform CLI not available but configuration validated manually.","dependencies":[{"issue_id":"mealfinding-cdn-1aq","depends_on_id":"mealfinding-cdn-3y1","type":"blocks","created_at":"2026-01-04T18:15:41.190006657-08:00","created_by":"sword"},{"issue_id":"mealfinding-cdn-1aq","depends_on_id":"mealfinding-cdn-5hk","type":"blocks","created_at":"2026-01-04T18:15:41.337442519-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-3kw","title":"Test: Verify plan posted as PR comment","description":"## Task\nVerify the terraform plan is posted as a comment on the PR.\n\n## OpenSpec Reference\nTask 4.3 from `add-github-terraform-pipeline`\n\n## Acceptance Criteria\n- Plan job completes successfully\n- Comment posted on PR with plan output\n- Comment includes link to workflow run\n- Plan is readable and correctly formatted","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:31:44.268586575-08:00","created_by":"sword","updated_at":"2026-01-04T20:31:44.268586575-08:00","labels":["testing"],"dependencies":[{"issue_id":"mealfinding-cdn-3kw","depends_on_id":"mealfinding-cdn-duk","type":"blocks","created_at":"2026-01-04T20:32:55.863415419-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-3y1","title":"Terraform Configuration - providers, variables, main, tls, outputs","description":"## Requirements\n- Create `terraform/providers.tf` with Fastly provider and Tigris S3 backend\n- Create `terraform/variables.tf` with domain, origin, and TTL variables\n- Create `terraform/main.tf` with Fastly VCL service:\n  - Configure domains (apex, www, api)\n  - Configure backends (web_origin, api_origin)\n  - Configure conditions for routing and content types\n  - Configure cache settings per content type\n  - Configure security headers (HSTS, CSP, X-Frame-Options, etc.)\n  - Configure gzip compression\n- Create `terraform/tls.tf` with TLS subscription for Let's Encrypt\n- Create `terraform/outputs.tf` with service ID, domains, CNAME, TLS challenges\n\n## Acceptance Criteria\n- [ ] providers.tf has Fastly provider \u003e= 5.0.0\n- [ ] providers.tf has S3 backend pointing to fly.storage.tigris.dev\n- [ ] variables.tf defines service_name, domain_name, web_origin, api_origin, TTL vars\n- [ ] main.tf creates fastly_service_vcl resource with all domains and backends\n- [ ] tls.tf creates fastly_tls_subscription for Let's Encrypt certificates\n- [ ] outputs.tf exports service_id, domains, fastly_cname, tls_dns_challenges\n\n## Context\nOpenSpec: add-fastly-cdn-terraform, Section 3\nParent Epic: mealfinding-cdn-995\nDepends on: Project Setup, VCL Configuration (main.tf references VCL file)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T18:14:57.27029584-08:00","created_by":"sword","updated_at":"2026-01-04T18:28:16.950089669-08:00","closed_at":"2026-01-04T18:28:16.950089669-08:00","close_reason":"Created all Terraform configuration files: providers.tf, variables.tf, main.tf, tls.tf, outputs.tf. All acceptance criteria met.","dependencies":[{"issue_id":"mealfinding-cdn-3y1","depends_on_id":"mealfinding-cdn-9h0","type":"blocks","created_at":"2026-01-04T18:15:41.024105121-08:00","created_by":"sword"},{"issue_id":"mealfinding-cdn-3y1","depends_on_id":"mealfinding-cdn-5hk","type":"blocks","created_at":"2026-01-04T18:15:41.105333753-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-4k7","title":"Create terraform.yml workflow file","description":"## Task\nCreate the main GitHub Actions workflow file for Terraform.\n\n## OpenSpec Reference\nTask 2.1 from `add-github-terraform-pipeline`\n\n## File\n`.github/workflows/terraform.yml`\n\n## Structure\n- Workflow name: Terraform\n- Triggers: push/PR to main on terraform/** paths\n- Jobs: terraform-validate, terraform-plan, terraform-apply\n- Concurrency controls\n- Environment variables for Tigris endpoint\n\n## Acceptance Criteria\n- Workflow file exists and is valid YAML\n- Triggers configured correctly\n- All three jobs defined","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:30:09.482860388-08:00","created_by":"sword","updated_at":"2026-01-04T20:30:09.482860388-08:00","labels":["implementation"],"dependencies":[{"issue_id":"mealfinding-cdn-4k7","depends_on_id":"mealfinding-cdn-9tn","type":"blocks","created_at":"2026-01-04T20:32:41.38578064-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-5hk","title":"VCL Configuration - Routing, caching, and error handling","description":"## Requirements\n- Create `terraform/vcl/` directory\n- Create `terraform/vcl/main.vcl` with:\n  - Subdomain-based backend routing (vcl_recv)\n  - HTTPS redirect logic\n  - Cache key optimization (vcl_hash)\n  - Content-type TTL rules (vcl_fetch)\n  - Cache status headers (vcl_deliver)\n  - Custom error pages (vcl_error)\n\n## Acceptance Criteria\n- [ ] vcl_recv routes api.mealfinding.com to api_origin backend\n- [ ] vcl_recv routes www/apex to web_origin backend\n- [ ] HTTP requests redirect to HTTPS (301)\n- [ ] vcl_hash includes host for cache key separation\n- [ ] vcl_fetch sets 24h TTL for static assets, 1h for HTML\n- [ ] vcl_deliver adds X-Cache and X-Cache-Hits headers\n- [ ] vcl_error returns custom 404 and 503 pages\n\n## Context\nOpenSpec: add-fastly-cdn-terraform, Section 4\nParent Epic: mealfinding-cdn-995\nDepends on: Project Setup","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T18:15:04.760516796-08:00","created_by":"sword","updated_at":"2026-01-04T18:26:39.559831908-08:00","closed_at":"2026-01-04T18:26:39.559831908-08:00","close_reason":"Created terraform/vcl/main.vcl with subdomain routing, HTTPS redirect, cache optimization, and custom error pages. All acceptance criteria met.","dependencies":[{"issue_id":"mealfinding-cdn-5hk","depends_on_id":"mealfinding-cdn-9h0","type":"blocks","created_at":"2026-01-04T18:15:40.954477324-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-7i5","title":"Implement terraform-apply job","description":"## Task\nImplement the apply stage job with manual approval gate.\n\n## OpenSpec Reference\nTask 2.4 from `add-github-terraform-pipeline`\n\n## Steps\n1. Depends on plan job\n2. Conditional: only on push to main (`github.ref == 'refs/heads/main'`)\n3. `trstringer/manual-approval@v1` action:\n   - Approver: sword\n   - Creates GitHub Issue for approval\n   - Waits for 'approved' comment\n4. Download plan artifact\n5. `terraform init`\n6. `terraform apply tfplan`\n\n## Acceptance Criteria\n- Job only runs on push to main (skipped on PRs)\n- Approval issue created with clear instructions\n- Apply uses saved plan artifact (not fresh plan)\n- Success/failure summary posted","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:30:41.817137311-08:00","created_by":"sword","updated_at":"2026-01-04T20:30:41.817137311-08:00","labels":["implementation"],"dependencies":[{"issue_id":"mealfinding-cdn-7i5","depends_on_id":"mealfinding-cdn-4k7","type":"blocks","created_at":"2026-01-04T20:32:41.755484607-08:00","created_by":"sword"},{"issue_id":"mealfinding-cdn-7i5","depends_on_id":"mealfinding-cdn-uw0","type":"blocks","created_at":"2026-01-04T20:32:47.506186961-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-8ji","title":"Implement terraform-validate job","description":"## Task\nImplement the validation stage job in the Terraform workflow.\n\n## OpenSpec Reference\nTask 2.2 from `add-github-terraform-pipeline`\n\n## Steps\n1. Checkout repository\n2. Setup Terraform 1.5.x\n3. `terraform fmt -check -recursive`\n4. `terraform init -backend=false` (syntax only)\n5. `terraform validate`\n6. Summary output to workflow summary\n\n## Acceptance Criteria\n- Job runs without secrets (uses -backend=false)\n- Fails if formatting is incorrect\n- Fails if syntax errors detected\n- Posts summary to GitHub Actions UI","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:30:16.449970833-08:00","created_by":"sword","updated_at":"2026-01-04T20:30:16.449970833-08:00","labels":["implementation"],"dependencies":[{"issue_id":"mealfinding-cdn-8ji","depends_on_id":"mealfinding-cdn-4k7","type":"blocks","created_at":"2026-01-04T20:32:41.496358807-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-995","title":"Add Fastly CDN Terraform Infrastructure","description":"## Overview\nImplement Terraform configuration for Fastly CDN to serve mealfinding.com\n\n## OpenSpec Change\n`add-fastly-cdn-terraform`\n\n## Scope\n- Terraform state backend (Tigris)\n- Fastly VCL service configuration\n- Custom VCL routing and caching\n- TLS certificates (Let's Encrypt)\n- Security headers\n- Documentation\n\n## Domains\n- mealfinding.com (apex)\n- www.mealfinding.com\n- api.mealfinding.com\n\n## Origins\n- mealfinding-web.fly.dev (web frontend)\n- mealfinding-api.fly.dev (REST API)\n\n## Reference\n- Proposal: openspec/changes/add-fastly-cdn-terraform/proposal.md\n- Design: openspec/changes/add-fastly-cdn-terraform/design.md\n- Tasks: openspec/changes/add-fastly-cdn-terraform/tasks.md","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-04T18:13:54.541672166-08:00","created_by":"sword","updated_at":"2026-01-04T19:57:58.249858548-08:00","closed_at":"2026-01-04T19:57:58.249858548-08:00","close_reason":"All implementation tasks completed. Terraform infrastructure configured, Tigris bucket created, documentation complete. Ready for deployment."}
{"id":"mealfinding-cdn-9h0","title":"Project Setup - Directory structure and .gitignore","description":"## Requirements\n- Update `.gitignore` with Terraform patterns (*.tfstate, .terraform/, *.tfvars, .env)\n- Create `terraform/` directory structure\n- Create `scripts/` directory\n\n## Acceptance Criteria\n- [ ] .gitignore includes all Terraform-related patterns\n- [ ] terraform/ directory exists\n- [ ] scripts/ directory exists\n\n## Context\nOpenSpec: add-fastly-cdn-terraform, Section 1\nParent Epic: mealfinding-cdn-995","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T18:14:40.071553248-08:00","created_by":"sword","updated_at":"2026-01-04T18:18:16.173804403-08:00","closed_at":"2026-01-04T18:18:16.173804403-08:00","close_reason":"Created .gitignore with Terraform patterns, created terraform/ and scripts/ directories. All acceptance criteria met."}
{"id":"mealfinding-cdn-9tn","title":"Create .github/workflows directory","description":"## Task\nCreate the `.github/workflows/` directory structure for GitHub Actions.\n\n## OpenSpec Reference\nTask 1.1 from `add-github-terraform-pipeline`\n\n## Acceptance Criteria\n- Directory exists at `.github/workflows/`","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:30:01.867845741-08:00","created_by":"sword","updated_at":"2026-01-04T20:30:01.867845741-08:00","labels":["setup"]}
{"id":"mealfinding-cdn-9xn","title":"Configure path filters for workflow triggers","description":"## Task\nConfigure workflow to only trigger on relevant file changes.\n\n## OpenSpec Reference\nTask 2.6 from `add-github-terraform-pipeline`\n\n## Configuration\n```yaml\non:\n  push:\n    branches: [main]\n    paths:\n      - 'terraform/**'\n      - '.github/workflows/terraform.yml'\n  pull_request:\n    branches: [main]\n    paths:\n      - 'terraform/**'\n      - '.github/workflows/terraform.yml'\n```\n\n## Acceptance Criteria\n- Workflow only triggers on terraform/ changes\n- Workflow also triggers on its own file changes (self-test)\n- Unrelated changes don't trigger the pipeline","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:30:54.701637419-08:00","created_by":"sword","updated_at":"2026-01-04T20:30:54.701637419-08:00","labels":["implementation"],"dependencies":[{"issue_id":"mealfinding-cdn-9xn","depends_on_id":"mealfinding-cdn-4k7","type":"blocks","created_at":"2026-01-04T20:32:41.928878166-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-ap9","title":"Add GitHub Actions Terraform Pipeline","description":"## Overview\nImplement automated CI/CD pipeline for Terraform infrastructure deployments.\n\n## OpenSpec Reference\n- Change: `add-github-terraform-pipeline`\n- Spec: `ci-cd` (new capability)\n\n## Stages\n1. **Validate** - Format check and syntax validation\n2. **Plan** - Generate execution plan, save artifact, PR comments\n3. **Apply** - Manual approval via GitHub Issue, then apply\n\n## Acceptance Criteria\n- Pipeline triggers on PR and push to main for terraform/** changes\n- Plan posted as PR comment\n- Apply requires manual approval via GitHub Issue\n- Concurrency controls prevent parallel operations\n\n## Files\n- `.github/workflows/terraform.yml` (new)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-04T20:29:40.245478793-08:00","created_by":"sword","updated_at":"2026-01-04T20:29:40.245478793-08:00","labels":["openspec"]}
{"id":"mealfinding-cdn-duk","title":"Test: Verify validation stage runs","description":"## Task\nVerify the validation stage executes correctly on the test PR.\n\n## OpenSpec Reference\nTask 4.2 from `add-github-terraform-pipeline`\n\n## Acceptance Criteria\n- terraform-validate job runs\n- Format check passes\n- Syntax validation passes\n- Summary appears in workflow UI","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:31:39.681929289-08:00","created_by":"sword","updated_at":"2026-01-04T20:31:39.681929289-08:00","labels":["testing"],"dependencies":[{"issue_id":"mealfinding-cdn-duk","depends_on_id":"mealfinding-cdn-liw","type":"blocks","created_at":"2026-01-04T20:32:55.714469588-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-f65","title":"State Backend Setup - Tigris bucket and credentials","description":"## Requirements\n- Create `scripts/setup-tigris.sh` to provision Tigris bucket\n- Document Tigris credential setup in README\n\n## Acceptance Criteria\n- [ ] setup-tigris.sh creates bucket named `mealfinding-terraform-state`\n- [ ] Script outputs credentials (AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)\n- [ ] README documents environment variable setup\n\n## Context\nOpenSpec: add-fastly-cdn-terraform, Section 2\nParent Epic: mealfinding-cdn-995\nDepends on: Project Setup task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T18:14:49.526550874-08:00","created_by":"sword","updated_at":"2026-01-04T18:23:15.377197071-08:00","closed_at":"2026-01-04T18:23:15.377197071-08:00","close_reason":"Created setup-tigris.sh script and scripts/README.md with environment variable documentation. All acceptance criteria met.","dependencies":[{"issue_id":"mealfinding-cdn-f65","depends_on_id":"mealfinding-cdn-9h0","type":"blocks","created_at":"2026-01-04T18:15:40.802100733-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-g7q","title":"Test: Verify apply executes successfully","description":"## Task\nVerify the terraform apply completes successfully after approval.\n\n## OpenSpec Reference\nTask 4.6 from `add-github-terraform-pipeline`\n\n## Acceptance Criteria\n- terraform apply uses saved plan artifact\n- Apply completes without errors\n- Summary posted to workflow UI\n- Infrastructure state updated","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:32:09.609309411-08:00","created_by":"sword","updated_at":"2026-01-04T20:32:09.609309411-08:00","labels":["testing"],"dependencies":[{"issue_id":"mealfinding-cdn-g7q","depends_on_id":"mealfinding-cdn-qru","type":"blocks","created_at":"2026-01-04T20:32:56.211033163-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-gad","title":"Update terraform README with CI/CD docs","description":"## Task\nUpdate the Terraform README with CI/CD pipeline documentation.\n\n## OpenSpec Reference\nTask 3.1 from `add-github-terraform-pipeline`\n\n## File\n`terraform/README.md`\n\n## Content to Add\n- How to trigger deployments\n- How to approve applies (comment 'approved' on Issue)\n- Required secrets setup instructions\n- Pipeline architecture diagram/explanation\n\n## Acceptance Criteria\n- README updated with CI/CD section\n- Clear instructions for approving deployments\n- Secrets requirements documented","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:31:30.306238033-08:00","created_by":"sword","updated_at":"2026-01-04T20:31:30.306238033-08:00","labels":["documentation"]}
{"id":"mealfinding-cdn-ksj","title":"Add GitHub secrets for Terraform pipeline","description":"## Task\nAdd required secrets to GitHub repository settings.\n\n## OpenSpec Reference\nTask 1.2 from `add-github-terraform-pipeline`\n\n## Required Secrets\n- `AWS_ACCESS_KEY_ID` - Tigris access token (format: tid_xxxxx)\n- `AWS_SECRET_ACCESS_KEY` - Tigris secret key (format: tsec_xxxxx)  \n- `FASTLY_API_KEY` - Fastly API token\n\n## Acceptance Criteria\n- All three secrets configured in GitHub Settings \u003e Secrets and variables \u003e Actions\n- Secrets are not exposed in logs\n\n## Note\nThis is a manual task - requires GitHub admin access","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:30:05.446423857-08:00","created_by":"sword","updated_at":"2026-01-04T20:30:05.446423857-08:00","labels":["setup"]}
{"id":"mealfinding-cdn-liw","title":"Test: Create PR with trivial terraform change","description":"## Task\nCreate a test PR to verify the pipeline triggers correctly.\n\n## OpenSpec Reference\nTask 4.1 from `add-github-terraform-pipeline`\n\n## Steps\n1. Create feature branch\n2. Make trivial change to terraform (e.g., add comment)\n3. Push and create PR\n\n## Acceptance Criteria\n- PR created successfully\n- Pipeline triggers on the PR","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:31:35.411996125-08:00","created_by":"sword","updated_at":"2026-01-04T20:31:35.411996125-08:00","labels":["testing"],"dependencies":[{"issue_id":"mealfinding-cdn-liw","depends_on_id":"mealfinding-cdn-7i5","type":"blocks","created_at":"2026-01-04T20:32:50.792743623-08:00","created_by":"sword"},{"issue_id":"mealfinding-cdn-liw","depends_on_id":"mealfinding-cdn-nx3","type":"blocks","created_at":"2026-01-04T20:32:50.948959143-08:00","created_by":"sword"},{"issue_id":"mealfinding-cdn-liw","depends_on_id":"mealfinding-cdn-9xn","type":"blocks","created_at":"2026-01-04T20:32:51.092421362-08:00","created_by":"sword"},{"issue_id":"mealfinding-cdn-liw","depends_on_id":"mealfinding-cdn-ksj","type":"blocks","created_at":"2026-01-04T20:32:51.25091373-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-mo5","title":"Test: Verify denial flow works","description":"## Task\nTest the denial flow by commenting 'denied' on an approval Issue.\n\n## OpenSpec Reference\nTask 4.7 from `add-github-terraform-pipeline`\n\n## Steps\n1. Trigger another pipeline run (e.g., push another change)\n2. When approval Issue is created, comment 'denied'\n\n## Acceptance Criteria\n- Apply job fails after denial\n- No infrastructure changes made\n- Workflow marked as failed","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:32:13.894607367-08:00","created_by":"sword","updated_at":"2026-01-04T20:32:13.894607367-08:00","labels":["testing"],"dependencies":[{"issue_id":"mealfinding-cdn-mo5","depends_on_id":"mealfinding-cdn-g7q","type":"blocks","created_at":"2026-01-04T20:32:56.339621548-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-nx3","title":"Configure pipeline concurrency control","description":"## Task\nAdd concurrency controls to prevent parallel Terraform operations.\n\n## OpenSpec Reference\nTask 2.5 from `add-github-terraform-pipeline`\n\n## Configuration\n```yaml\nconcurrency:\n  group: terraform-${{ github.ref }}\n  cancel-in-progress: ${{ github.event_name == 'pull_request' }}\n```\n\n## Behavior\n- Groups runs by branch/ref\n- Cancels in-progress PR runs (fast feedback)\n- Never cancels main branch runs (protects applies)\n\n## Acceptance Criteria\n- Only one pipeline runs per branch at a time\n- New PR commits cancel previous runs\n- Main branch runs queue, never cancel","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:30:48.745587381-08:00","created_by":"sword","updated_at":"2026-01-04T20:30:48.745587381-08:00","labels":["implementation"],"dependencies":[{"issue_id":"mealfinding-cdn-nx3","depends_on_id":"mealfinding-cdn-4k7","type":"blocks","created_at":"2026-01-04T20:32:41.843674508-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-qru","title":"Test: Verify approval flow works","description":"## Task\nTest the approval flow by commenting 'approved' on the Issue.\n\n## OpenSpec Reference\nTask 4.5 from `add-github-terraform-pipeline`\n\n## Steps\n1. Comment 'approved' on the approval Issue\n2. Watch the apply job continue\n\n## Acceptance Criteria\n- Apply job resumes after approval\n- Terraform apply executes successfully\n- Issue is closed after workflow completes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:32:05.226702741-08:00","created_by":"sword","updated_at":"2026-01-04T20:32:05.226702741-08:00","labels":["testing"],"dependencies":[{"issue_id":"mealfinding-cdn-qru","depends_on_id":"mealfinding-cdn-w04","type":"blocks","created_at":"2026-01-04T20:32:56.119664176-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-uw0","title":"Implement terraform-plan job","description":"## Task\nImplement the plan stage job in the Terraform workflow.\n\n## OpenSpec Reference\nTask 2.3 from `add-github-terraform-pipeline`\n\n## Steps\n1. Depends on validate job\n2. Configure secrets as env vars (AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, FASTLY_API_KEY)\n3. Checkout and setup Terraform\n4. `terraform init` with Tigris backend\n5. `terraform plan -out=tfplan`\n6. Upload plan artifact (1-day retention)\n7. Post plan as PR comment (conditional on PR event)\n\n## Acceptance Criteria\n- Job depends on terraform-validate\n- Secrets properly configured\n- Plan file saved as artifact\n- Human-readable plan text also saved\n- PR comment posted with plan output (truncated if \u003e60k chars)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:30:35.979473348-08:00","created_by":"sword","updated_at":"2026-01-04T20:30:35.979473348-08:00","labels":["implementation"],"dependencies":[{"issue_id":"mealfinding-cdn-uw0","depends_on_id":"mealfinding-cdn-4k7","type":"blocks","created_at":"2026-01-04T20:32:41.641120121-08:00","created_by":"sword"},{"issue_id":"mealfinding-cdn-uw0","depends_on_id":"mealfinding-cdn-8ji","type":"blocks","created_at":"2026-01-04T20:32:47.41213657-08:00","created_by":"sword"}]}
{"id":"mealfinding-cdn-w04","title":"Test: Verify approval issue created on merge","description":"## Task\nMerge the test PR and verify the approval issue is created.\n\n## OpenSpec Reference\nTask 4.4 from `add-github-terraform-pipeline`\n\n## Steps\n1. Merge the test PR to main\n2. Watch the apply job\n\n## Acceptance Criteria\n- Pipeline triggers on push to main\n- Apply job creates GitHub Issue for approval\n- Issue contains clear instructions (approve/deny)\n- Issue links to workflow run","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T20:32:01.262239216-08:00","created_by":"sword","updated_at":"2026-01-04T20:32:01.262239216-08:00","labels":["testing"],"dependencies":[{"issue_id":"mealfinding-cdn-w04","depends_on_id":"mealfinding-cdn-3kw","type":"blocks","created_at":"2026-01-04T20:32:56.043876098-08:00","created_by":"sword"}]}
